M8.x 路线清单（Incidents / Evidence / Witness / Audit）
8.0 Incident 基础闭环（你应该已完成或接近完成）

目标：能报案、能查单、能改状态；对外字段严格按 IncidentItem 口径。
讨论点：

哪些 incident_type 允许绑定 charger_id / segment_id（以及必填规则）

状态机是否允许 OPEN→RESOLVED 直达、谁有权限触发
最小测试：HTTP：report → list(filter) → update_status → list 验证状态变化 & 8字段。

✅ 8.1 Witness Voting Semantics（你现在已完成）

目标：witness allowlist、charger_state 校验、幂等去重、evidence_refs<=5、达阈值推进 EVIDENCE_CONFIRMED、8字段不泄露。
是否要测试：你已经做了 store-level + HTTP 集成，两份都过就算收工。

8.2 Witness SLA + 自动降级触发（“投票不足 → 视觉/AI”）

目标：在 witness_sla_timeout_minutes 内达不到最小样本/票数，就触发降级路径（比如进入 UNDER_OBSERVATION / 触发一次 AI 审计任务）。
讨论点（很关键）：

“不足”的定义：票数不足？还是票数够但分歧太大也算不足？

超时后状态怎么走：直接 ESCALATED？还是 UNDER_OBSERVATION 并挂一个 audit 任务？

超时的计时基准：incident created_at 还是 status_updated_at？
最小测试：把 SLA 时间设很短，造 0/1 票 → 等超时 → 验证状态/任务触发发生。

8.3 Vision/AI Audit Job 接口语义（异步任务层）

目标：把“需要摄像头+AI”的动作变成一个可追踪的 job（ACCEPTED/IN_PROGRESS/COMPLETED/FAILED），并把结论写回 ai_insights（或 incident 状态推进）。
讨论点：

什么时候创建 job：超时触发？还是人工点“复核”？

AI 结论如何影响状态：只写 ai_insights 还是可以推进到 EVIDENCE_CONFIRMED / ESCALATED？

失败策略：AI 失败是否自动升级工单/管理员？
最小测试：HTTP：触发 job → 轮询 job 状态（mock 也行）→ 验证 incident ai_insights 有新增且字段不漂移。

8.4 “Active Re-certification” 复核机制（你之前提过 HARD_BLOCKED 方案）

目标：超时不自动解锁；改为“高置信度复核 / 视觉审计 / 冲突升级”。
讨论点：

复核 A 的触发条件（多少台机器人、如何保证互不相关）

复核 B 的触发门槛（什么时候必须上视觉）

冲突时谁赢：AI 判有风险 → 强制维持 HARD 并升级
最小测试：模拟“超时未结案”→ 触发复核路径→ 状态保持/升级符合预期。

8.5 证据链规范化与上限策略（evidence_refs / snapshot_ref）

目标：证据引用格式、去重、上限、排序规则稳定；避免“无限增长/重复刷证据”。
讨论点：

evidence_refs 的格式约定是否要进 FIELD_REGISTRY（你之前提到这块缺口）

上限策略：每次写入截断还是全局去重后截断？
最小测试：反复提交重复/大量 evidence_refs → 最终列表稳定、<=上限、顺序可解释。

8.6 Dashboard 统计口径固化（你现在已有 daily_report，但口径要“锁死”）

目标：把“今日/严重/陈旧未处理”等统计口径写成不可漂移的规则（DEMO vs CALENDAR）。
讨论点：

unresolved 是否“全量不看日期”（你现在是这样）是否符合 demo 叙事

stale 的阈值到底按真实分钟还是 demo 缩放（你现在按真实分钟）
最小测试：构造不同 created/status_updated_at → 统计结果可预测。